.autodepend

!if !$d(BCROOT)
BCROOT=C:\BCC_20
!endif

!if !$d(EPISODE)
EPISODE=1
!endif

CC=$(BCROOT)\BIN\bcc
TLINK=$(BCROOT)\BIN\tlink
TASM=$(BCROOT)\BIN\tasm

INCLUDEDIR=$(BCROOT)\INCLUDE
LIBDIR=$(BCROOT)\LIB

CFLAGS=-I$(INCLUDEDIR) -L$(LIBDIR) -1- -G -Z -k -mm -a- -f- -b -DEPISODE=$(EPISODE)
LDFLAGS=/c /s /m /i /L$(BCROOT)\LIB

OBJS=BM_MAIN.OBJ BM_TEXT.OBJ BM_DEMO.OBJ BM_GAME1.OBJ BM_GAME2.OBJ BM_GAME3.OBJ BM_STATE.OBJ BM_PLAY1.OBJ BM_PLAY2.OBJ BM_SPEC.OBJ BM_ACT1.OBJ BM_ACT2.OBJ BM_ACT3.OBJ ID_CA.OBJ ID_IN.OBJ ID_MM.OBJ ID_RF.OBJ ID_SD.OBJ ID_US_1.OBJ ID_US_2.OBJ ID_VW.OBJ ID_RF_A.OBJ ID_US_A.OBJ ID_VW_A.OBJ DATA\BM1INTRO.OBJ
TARGET=BMENACE$(EPISODE).EXE


all: $(TARGET)

clean:
	@del *.exe
	@del *.map
	@del *.obj

.asm.obj:
	$(TASM) /MX /ZI /O $.

.c.obj:
	$(CC) @&&!
$(CFLAGS) -c $.
!

$(TARGET): $(OBJS)
	$(TLINK) $(LDFLAGS) C0M.OBJ @&&!
$(OBJS), $(TARGET), , CM.LIB
!
